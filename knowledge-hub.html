<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knowledge Hub | JuriBank - Latest Legal Updates & Resources</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'student-blue': '#2563eb',
                        'student-green': '#059669',
                        'student-orange': '#ea580c',
                        'trust-gray': '#64748b',
                        'background-cream': '#fefdf8'
                    },
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body { font-family: 'Inter', sans-serif; }
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-2px); box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1); }
        .source-badge { transition: all 0.3s ease; }
        .source-badge:hover { transform: scale(1.05); }
        .fresh-indicator { 
            animation: pulse 2s infinite;
            background: linear-gradient(45deg, #059669, #10b981);
        }
    </style>
</head>
<body class="bg-background-cream">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <a href="index.html" class="flex items-center">
                        <img src="/assets/juribank-logo.svg" alt="JuriBank" class="h-8 w-auto">
                        <span class="ml-2 text-xl font-semibold text-gray-900">JuriBank</span>
                        <span class="ml-2 text-sm bg-student-blue text-white px-2 py-1 rounded-full">by Students</span>
                    </a>
                </div>
                <div class="flex items-center space-x-6">
                    <a href="index.html" class="text-gray-700 hover:text-student-blue font-medium">Home</a>
                    <a href="claim-wizard.html" class="text-gray-700 hover:text-student-blue font-medium">Free Tools</a>
                    <a href="#" class="text-gray-700 hover:text-student-blue font-medium">Community</a>
                    <a href="dashboard.html" class="text-student-blue font-medium">Dashboard</a>
                    <button class="bg-student-blue text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700">
                        Sign Up Free
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Header -->
        <div class="text-center mb-12">
            <h1 class="text-4xl font-bold text-gray-900 mb-4">Knowledge Hub</h1>
            <p class="text-xl text-gray-600 mb-6">Always up-to-date information from official sources</p>
            <div class="flex justify-center items-center space-x-4 text-sm">
                <div class="flex items-center bg-blue-100 text-blue-800 px-3 py-1 rounded-full">
                    <div class="w-2 h-2 bg-blue-600 rounded-full mr-2 fresh-indicator"></div>
                    <span>Live API feeds</span>
                </div>
                <div class="flex items-center bg-green-100 text-green-800 px-3 py-1 rounded-full">
                    <i class="fas fa-shield-alt mr-2"></i>
                    <span>Official sources only</span>
                </div>
                <div class="flex items-center bg-purple-100 text-purple-800 px-3 py-1 rounded-full">
                    <i class="fas fa-users mr-2"></i>
                    <span>Student moderated</span>
                </div>
            </div>
        </div>

        <!-- Search and Filters -->
        <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
            <div class="grid lg:grid-cols-4 gap-6">
                <!-- Search -->
                <div class="lg:col-span-2">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Search Resources</label>
                    <div class="relative">
                        <input type="text" placeholder="Search legal updates, guides, templates..." 
                               class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-student-blue focus:border-transparent">
                        <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                    </div>
                </div>

                <!-- Topic Filter -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Topic</label>
                    <select class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-student-blue focus:border-transparent">
                        <option>All Topics</option>
                        <option>Banking Issues</option>
                        <option>Payment Problems</option>
                        <option>Investment Complaints</option>
                        <option>Insurance Claims</option>
                        <option>Mortgage Disputes</option>
                        <option>Credit Card Issues</option>
                    </select>
                </div>

                <!-- Source Filter -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Source</label>
                    <select class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-student-blue focus:border-transparent">
                        <option>All Sources</option>
                        <option>Gov.UK</option>
                        <option>FCA</option>
                        <option>Financial Ombudsman</option>
                        <option>Bank of England</option>
                        <option>PRA</option>
                    </select>
                </div>
            </div>

            <!-- Advanced Filters -->
            <div class="mt-6 pt-6 border-t border-gray-200">
                <div class="grid md:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Content Type</label>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="checkbox" checked class="mr-2 text-student-blue">
                                <span class="text-sm">Legal Updates</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" checked class="mr-2 text-student-blue">
                                <span class="text-sm">Templates</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2 text-student-blue">
                                <span class="text-sm">Statistics</span>
                            </label>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Updated</label>
                        <select class="w-full p-2 border border-gray-300 rounded-lg text-sm">
                            <option>Last 7 days</option>
                            <option>Last 30 days</option>
                            <option>Last 3 months</option>
                            <option>Last 6 months</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Relevance</label>
                        <select class="w-full p-2 border border-gray-300 rounded-lg text-sm">
                            <option>Most Recent</option>
                            <option>Most Popular</option>
                            <option>Most Bookmarked</option>
                            <option>Alphabetical</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Featured Updates -->
        <div class="mb-8">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">ðŸ”¥ Featured Updates</h2>
            <div class="featured-updates-container grid md:grid-cols-2 gap-6">
                <!-- Loading placeholder -->
                <div class="bg-gray-100 rounded-xl p-6 animate-pulse">
                    <div class="flex items-center mb-4">
                        <div class="bg-gray-300 w-12 h-12 rounded-lg mr-4"></div>
                        <div class="flex-1">
                            <div class="bg-gray-300 h-4 rounded mb-2"></div>
                            <div class="bg-gray-300 h-3 rounded w-1/2"></div>
                        </div>
                    </div>
                    <div class="bg-gray-300 h-20 rounded mb-4"></div>
                    <div class="bg-gray-300 h-6 rounded w-1/3"></div>
                </div>
                <div class="bg-gray-100 rounded-xl p-6 animate-pulse">
                    <div class="flex items-center mb-4">
                        <div class="bg-gray-300 w-12 h-12 rounded-lg mr-4"></div>
                        <div class="flex-1">
                            <div class="bg-gray-300 h-4 rounded mb-2"></div>
                            <div class="bg-gray-300 h-3 rounded w-1/2"></div>
                        </div>
                    </div>
                    <div class="bg-gray-300 h-20 rounded mb-4"></div>
                    <div class="bg-gray-300 h-6 rounded w-1/3"></div>
                </div>
            </div>
        </div>

        <!-- Main Content Grid -->
        <div class="grid lg:grid-cols-4 gap-8">
            <!-- Content List -->
            <div class="lg:col-span-3">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold text-gray-900">Latest Resources</h2>
                    <p class="text-gray-600">Showing 15 of 247 resources</p>
                </div>

                <div class="content-list-container space-y-6">
                    <!-- Loading placeholders -->
                    <div class="bg-gray-100 rounded-2xl p-6 animate-pulse">
                        <div class="flex items-start justify-between mb-4">
                            <div class="flex items-start flex-1">
                                <div class="bg-gray-300 w-12 h-12 rounded-lg mr-4 flex-shrink-0"></div>
                                <div class="flex-1">
                                    <div class="bg-gray-300 h-5 rounded mb-2"></div>
                                    <div class="bg-gray-300 h-3 rounded w-1/2 mb-3"></div>
                                    <div class="flex space-x-2">
                                        <div class="bg-gray-300 h-5 w-16 rounded-full"></div>
                                        <div class="bg-gray-300 h-5 w-20 rounded-full"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="bg-gray-300 h-16 rounded mb-4"></div>
                        <div class="flex justify-between">
                            <div class="bg-gray-300 h-4 w-1/3 rounded"></div>
                            <div class="bg-gray-300 h-8 w-24 rounded"></div>
                        </div>
                    </div>
                    
                    <div class="bg-gray-100 rounded-2xl p-6 animate-pulse">
                        <div class="flex items-start justify-between mb-4">
                            <div class="flex items-start flex-1">
                                <div class="bg-gray-300 w-12 h-12 rounded-lg mr-4 flex-shrink-0"></div>
                                <div class="flex-1">
                                    <div class="bg-gray-300 h-5 rounded mb-2"></div>
                                    <div class="bg-gray-300 h-3 rounded w-1/2 mb-3"></div>
                                    <div class="flex space-x-2">
                                        <div class="bg-gray-300 h-5 w-16 rounded-full"></div>
                                        <div class="bg-gray-300 h-5 w-20 rounded-full"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="bg-gray-300 h-16 rounded mb-4"></div>
                        <div class="flex justify-between">
                            <div class="bg-gray-300 h-4 w-1/3 rounded"></div>
                            <div class="bg-gray-300 h-8 w-24 rounded"></div>
                        </div>
                    </div>

                    <!-- Load More -->
                    <div class="text-center py-8">
                        <button id="load-more-btn" class="bg-student-blue text-white px-8 py-3 rounded-lg font-medium hover:bg-blue-700">
                            Load More Resources
                        </button>
                        <p class="text-sm text-gray-600 mt-2"><span id="results-count">Loading...</span> â€¢ Free members see 10 per page</p>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="space-y-6">
                <!-- Source Status -->
                <div class="bg-white rounded-2xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Source Status</h3>
                    <div class="source-status-container space-y-4">
                        <!-- Loading placeholder -->
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <div class="w-3 h-3 bg-gray-300 rounded-full mr-3 animate-pulse"></div>
                                <div class="bg-gray-300 h-4 w-16 rounded animate-pulse"></div>
                            </div>
                            <div class="bg-gray-300 h-3 w-20 rounded animate-pulse"></div>
                        </div>
                    </div>
                </div>

                <!-- Popular This Week -->
                <div class="bg-white rounded-2xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">ðŸ”¥ Popular This Week</h3>
                    <div class="space-y-4">
                        <div class="flex items-start">
                            <span class="bg-student-blue text-white text-xs px-2 py-1 rounded font-bold mr-3 mt-1">1</span>
                            <div>
                                <h4 class="font-medium text-gray-900 text-sm">PPI Deadline Extension</h4>
                                <p class="text-xs text-gray-600">2,847 views â€¢ 3 days ago</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <span class="bg-gray-400 text-white text-xs px-2 py-1 rounded font-bold mr-3 mt-1">2</span>
                            <div>
                                <h4 class="font-medium text-gray-900 text-sm">Overdraft Charge Calculator</h4>
                                <p class="text-xs text-gray-600">1,923 views â€¢ 1 day ago</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <span class="bg-gray-400 text-white text-xs px-2 py-1 rounded font-bold mr-3 mt-1">3</span>
                            <div>
                                <h4 class="font-medium text-gray-900 text-sm">Template Letter Pack</h4>
                                <p class="text-xs text-gray-600">1,456 views â€¢ 2 days ago</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Your Bookmarks -->
                <div class="bg-white rounded-2xl shadow-lg p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">Your Bookmarks</h3>
                        <span class="text-sm text-red-600">3/3 full</span>
                    </div>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between p-2 bg-gray-50 rounded-lg">
                            <span class="text-sm font-medium truncate">New FCA Rules on Bank...</span>
                            <button class="text-gray-400 hover:text-red-500">
                                <i class="fas fa-times text-xs"></i>
                            </button>
                        </div>
                        <div class="flex items-center justify-between p-2 bg-gray-50 rounded-lg">
                            <span class="text-sm font-medium truncate">Complaint Letter Template</span>
                            <button class="text-gray-400 hover:text-red-500">
                                <i class="fas fa-times text-xs"></i>
                            </button>
                        </div>
                        <div class="flex items-center justify-between p-2 bg-gray-50 rounded-lg">
                            <span class="text-sm font-medium truncate">Success Rate Statistics</span>
                            <button class="text-gray-400 hover:text-red-500">
                                <i class="fas fa-times text-xs"></i>
                            </button>
                        </div>
                    </div>
                    <button class="w-full mt-3 text-student-blue text-sm font-medium hover:text-blue-700">
                        Upgrade for unlimited bookmarks
                    </button>
                </div>

                <!-- Upgrade Prompt -->
                <div class="bg-gradient-to-r from-student-blue to-student-green rounded-2xl p-6 text-white">
                    <h3 class="text-lg font-semibold mb-2">Unlock Full Library</h3>
                    <p class="text-sm opacity-90 mb-4">Access all 247 resources, unlimited bookmarks, and premium content</p>
                    <ul class="text-sm space-y-1 mb-4">
                        <li>âœ“ All resources & templates</li>
                        <li>âœ“ Advanced search & filters</li>
                        <li>âœ“ Unlimited bookmarks</li>
                        <li>âœ“ Premium statistics</li>
                        <li>âœ“ Email alerts for updates</li>
                    </ul>
                    <button class="w-full bg-white text-student-blue py-2 rounded-lg font-medium hover:bg-gray-50">
                        Upgrade Â£9.99/month
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-50 py-12 mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <div class="flex items-center justify-center mb-4">
                    <img src="/assets/juribank-logo.svg" alt="JuriBank" class="h-6 w-auto mr-2">
                    <span class="text-lg font-semibold text-gray-900">JuriBank</span>
                    <span class="ml-2 text-sm bg-student-blue text-white px-2 py-1 rounded-full">by Students</span>
                </div>
                <p class="text-gray-600 text-sm mb-4">Educational guidance powered by real-time official data</p>
                <div class="flex justify-center space-x-6 text-sm">
                    <a href="index.html" class="text-gray-600 hover:text-student-blue">Home</a>
                    <a href="claim-wizard.html" class="text-gray-600 hover:text-student-blue">Free Tools</a>
                    <a href="dashboard.html" class="text-gray-600 hover:text-student-blue">Dashboard</a>
                    <a href="#" class="text-gray-600 hover:text-student-blue">Community</a>
                    <a href="#" class="text-gray-600 hover:text-student-blue">Support</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Knowledge Hub API Integration -->
    <script src="/src/knowledge-hub-api.js"></script>
    <script>
        // Knowledge Hub Application
        class KnowledgeHubApp {
            constructor() {
                this.currentFilters = {};
                this.searchQuery = '';
                this.isLoading = false;
                
                this.initializeEventListeners();
                this.initializeSearchAndFilters();
            }

            initializeEventListeners() {
                // Search functionality
                const searchInput = document.querySelector('input[type="text"]');
                if (searchInput) {
                    searchInput.addEventListener('input', (e) => {
                        this.searchQuery = e.target.value;
                        this.debounceSearch();
                    });
                }

                // Filter functionality
                document.querySelectorAll('select').forEach(select => {
                    select.addEventListener('change', (e) => {
                        this.updateFilters();
                        this.performSearch();
                    });
                });

                document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                    checkbox.addEventListener('change', (e) => {
                        this.updateFilters();
                        this.performSearch();
                    });
                });

                // Load more button
                const loadMoreBtn = document.getElementById('load-more-btn');
                if (loadMoreBtn) {
                    loadMoreBtn.addEventListener('click', () => this.loadMoreContent());
                }

                // Listen for Knowledge Hub updates
                document.addEventListener('knowledge-hub-updated', (e) => {
                    this.updateResultsCount(e.detail.content.length);
                });
            }

            initializeSearchAndFilters() {
                // Set up debounced search
                this.searchDebounceTimer = null;
                
                // Initialize filters
                this.updateFilters();
            }

            debounceSearch() {
                clearTimeout(this.searchDebounceTimer);
                this.searchDebounceTimer = setTimeout(() => {
                    this.performSearch();
                }, 300);
            }

            updateFilters() {
                const topicSelect = document.querySelector('select[name="topic"]') || 
                                 document.querySelectorAll('select')[1];
                const sourceSelect = document.querySelector('select[name="source"]') || 
                                   document.querySelectorAll('select')[2];
                const timeSelect = document.querySelector('select[name="time"]') || 
                                 document.querySelectorAll('select')[3];
                
                this.currentFilters = {
                    topic: topicSelect?.value || 'All Topics',
                    source: sourceSelect?.value || 'All Sources',
                    timeRange: timeSelect?.value || 'Last 7 days',
                    contentType: this.getSelectedContentTypes()
                };
            }

            getSelectedContentTypes() {
                const checkboxes = document.querySelectorAll('input[type="checkbox"]:checked');
                const types = [];
                
                checkboxes.forEach(checkbox => {
                    const label = checkbox.parentElement.textContent.trim();
                    if (label.includes('Legal Updates')) types.push('guidance', 'regulation');
                    if (label.includes('Templates')) types.push('template');
                    if (label.includes('Statistics')) types.push('statistics', 'report');
                });
                
                return types.length > 0 ? types : null;
            }

            async performSearch() {
                if (this.isLoading) return;
                
                this.isLoading = true;
                this.showLoadingState();

                try {
                    let results;
                    
                    if (this.searchQuery) {
                        results = await knowledgeHub.search(this.searchQuery, this.currentFilters);
                    } else {
                        // Apply filters to current content
                        results = await this.applyFiltersToCurrentContent();
                    }

                    this.updateResultsCount(results.length);
                    
                } catch (error) {
                    console.error('Search failed:', error);
                    this.showErrorState();
                } finally {
                    this.isLoading = false;
                }
            }

            async applyFiltersToCurrentContent() {
                // Get fresh content with filters applied
                const freshContent = await Promise.allSettled([
                    knowledgeHub.fetchGovUKUpdates(),
                    knowledgeHub.fetchFCAUpdates(),
                    knowledgeHub.fetchOmbudsmanData(),
                    knowledgeHub.fetchBankOfEnglandNews()
                ]);

                const allContent = knowledgeHub.processInitialData(freshContent);
                const filteredContent = knowledgeHub.applyFilters(allContent, this.currentFilters);
                
                knowledgeHub.updateContentList(filteredContent);
                return filteredContent;
            }

            showLoadingState() {
                const contentContainer = document.querySelector('.content-list-container');
                if (!contentContainer) return;

                contentContainer.innerHTML = `
                    <div class="text-center py-12">
                        <div class="animate-spin w-8 h-8 border-4 border-student-blue border-t-transparent rounded-full mx-auto mb-4"></div>
                        <p class="text-gray-600">Searching knowledge hub...</p>
                    </div>
                `;
            }

            showErrorState() {
                const contentContainer = document.querySelector('.content-list-container');
                if (!contentContainer) return;

                contentContainer.innerHTML = `
                    <div class="text-center py-12">
                        <div class="bg-red-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-exclamation-triangle text-red-600 text-2xl"></i>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-900 mb-2">Search Failed</h3>
                        <p class="text-gray-600 mb-4">Unable to search knowledge hub at this time.</p>
                        <button onclick="location.reload()" class="bg-student-blue text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                            Try Again
                        </button>
                    </div>
                `;
            }

            updateResultsCount(count) {
                const resultsSpan = document.getElementById('results-count');
                if (resultsSpan) {
                    resultsSpan.textContent = `Showing ${Math.min(count, 10)} of ${count} resources`;
                }
            }

            async loadMoreContent() {
                const loadMoreBtn = document.getElementById('load-more-btn');
                if (!loadMoreBtn || this.isLoading) return;

                this.isLoading = true;
                loadMoreBtn.innerHTML = '<i class="fas fa-spinner animate-spin mr-2"></i>Loading...';
                loadMoreBtn.disabled = true;

                try {
                    // Simulate loading more content
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    // In a real app, this would load the next page of results
                    console.log('Load more content functionality');
                    
                } catch (error) {
                    console.error('Failed to load more content:', error);
                } finally {
                    loadMoreBtn.innerHTML = 'Load More Resources';
                    loadMoreBtn.disabled = false;
                    this.isLoading = false;
                }
            }
        }

        // Bookmark and favorite functionality
        function toggleBookmark(itemId) {
            const bookmarkBtn = document.querySelector(`[onclick="knowledgeHub.toggleBookmark('${itemId}')"]`);
            if (!bookmarkBtn) return;

            const icon = bookmarkBtn.querySelector('i');
            const isBookmarked = icon.classList.contains('fas');

            if (isBookmarked) {
                icon.classList.remove('fas');
                icon.classList.add('far');
                bookmarkBtn.classList.remove('text-student-blue');
                bookmarkBtn.classList.add('text-gray-400');
                this.showNotification('Bookmark removed', 'info');
            } else {
                // Check bookmark limit for free users
                const currentBookmarks = document.querySelectorAll('.fas.fa-bookmark').length;
                if (currentBookmarks >= 3) {
                    this.showUpgradePrompt('You\'ve reached your bookmark limit. Upgrade for unlimited bookmarks!');
                    return;
                }

                icon.classList.remove('far');
                icon.classList.add('fas');
                bookmarkBtn.classList.remove('text-gray-400');
                bookmarkBtn.classList.add('text-student-blue');
                this.showNotification('Bookmark added', 'success');
            }
        }

        function toggleFavorite(itemId) {
            const favoriteBtn = document.querySelector(`[onclick="knowledgeHub.toggleFavorite('${itemId}')"]`);
            if (!favoriteBtn) return;

            const icon = favoriteBtn.querySelector('i');
            const isFavorited = favoriteBtn.classList.contains('text-red-500');

            if (isFavorited) {
                favoriteBtn.classList.remove('text-red-500');
                favoriteBtn.classList.add('text-gray-400');
                this.showNotification('Removed from favorites', 'info');
            } else {
                favoriteBtn.classList.remove('text-gray-400');
                favoriteBtn.classList.add('text-red-500');
                this.showNotification('Added to favorites', 'success');
            }
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-20 right-4 z-50 px-4 py-3 rounded-lg shadow-lg text-white transform transition-all duration-300 translate-x-full`;
            
            switch (type) {
                case 'success':
                    notification.classList.add('bg-green-500');
                    break;
                case 'error':
                    notification.classList.add('bg-red-500');
                    break;
                default:
                    notification.classList.add('bg-blue-500');
            }

            notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-${type === 'success' ? 'check' : type === 'error' ? 'exclamation-triangle' : 'info-circle'} mr-2"></i>
                    <span>${message}</span>
                </div>
            `;

            document.body.appendChild(notification);

            // Animate in
            setTimeout(() => {
                notification.classList.remove('translate-x-full');
            }, 100);

            // Remove after 3 seconds
            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        function showUpgradePrompt(message) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-2xl p-8 max-w-md mx-4">
                    <div class="text-center">
                        <div class="bg-yellow-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-crown text-yellow-600 text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-900 mb-4">Upgrade Required</h3>
                        <p class="text-gray-600 mb-6">${message}</p>
                        <div class="flex space-x-3">
                            <button onclick="this.closest('.fixed').remove()" class="flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">
                                Not Now
                            </button>
                            <button class="flex-1 px-4 py-2 bg-student-blue text-white rounded-lg hover:bg-blue-700">
                                Upgrade Â£9.99/month
                            </button>
                        </div>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            
            // Remove on outside click
            modal.addEventListener('click', (e) => {
                if (e.target === modal) modal.remove();
            });
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', () => {
            new KnowledgeHubApp();
            
            // Override knowledgeHub methods to include UI feedback
            const originalToggleBookmark = knowledgeHub.toggleBookmark;
            knowledgeHub.toggleBookmark = function(itemId) {
                toggleBookmark(itemId);
                return originalToggleBookmark.call(this, itemId);
            };

            const originalToggleFavorite = knowledgeHub.toggleFavorite;
            knowledgeHub.toggleFavorite = function(itemId) {
                toggleFavorite(itemId);
                return originalToggleFavorite.call(this, itemId);
            };
        });
    </script>
</body>
</html>